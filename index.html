<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Encontro UP | Construindo Uma Vida Mais Leve</title>
  <meta name="description" content="Inscreva-se na Encontro de Intelig√™ncia Emocional com din√¢mica de alto impacto e exerc√≠cio guiado para controlar a ansiedade. Conduzida por Rodrigo Damaceno. 71% das vagas preenchidas." />
    <!-- Favicons / App Icons -->
  <link rel="icon" href="img/up.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="img/up.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="img/up.png" />
  <link rel="shortcut icon" href="img/up.png" />
  <link rel="apple-touch-icon" href="img/up.png" />
  
  <!-- Open Graph / Facebook / WhatsApp -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://instituto-up-formulario.vercel.app/" />
  <meta property="og:title" content="Encontro UP | Construindo Uma Vida Mais Leve" />
  <meta property="og:description" content="Inscreva-se na Encontro de Intelig√™ncia Emocional com din√¢mica de alto impacto e exerc√≠cio guiado para controlar a ansiedade. Conduzida por Rodrigo Damaceno." />
  <meta property="og:image" content="https://instituto-up-formulario.vercel.app/img/up.png" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://instituto-up-formulario.vercel.app/" />
  <meta property="twitter:title" content="Encontro UP | Construindo Uma Vida Mais Leve" />
  <meta property="twitter:description" content="Inscreva-se na Encontro de Intelig√™ncia Emocional com din√¢mica de alto impacto e exerc√≠cio guiado para controlar a ansiedade. Conduzida por Rodrigo Damaceno." />
  <meta property="twitter:image" content="https://instituto-up-formulario.vercel.app/img/up.png" />

    <meta name="theme-color" content="#0a0a14" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      :root{
        --primary:#27abb6;             /* cor institucional principal */
        --primary-rgb:39,171,182;
        --bg:#000000;                  /* fundo principal preto */
        --bg2:#0e0e0e;                 /* varia√ß√£o de fundo */
        --text:#ffffff;                /* texto padr√£o */
        --muted:#d1d5d8;               /* texto secund√°rio */
        --card:#101414;                /* cart√µes */
        --card-border:#1e2627;         /* borda sutil */
        --accent:#27abb6;              /* igual primary para consist√™ncia */
        --danger:#ff5656;
        --focus:#ffffff;
        --focus-ring:0 0 0 3px rgba(var(--primary-rgb), .55);
      }
      *{box-sizing:border-box;-webkit-font-smoothing:antialiased;}
      html{font-size:18px;} /* base maior para legibilidade */
      @media (max-width:900px){ html{font-size:17px;} }
      @media (max-width:600px){ html{font-size:16px;} }
      html,body{height:100%}
      body{
        margin:0; font-family: 'Montserrat', system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
        color:var(--text);
        background:linear-gradient(145deg,#000000,#061112 55%, #082024);
        line-height:1.5;
      }
      .container{max-width:1100px; margin:0 auto; padding:24px}
      .hero{padding:40px 0 28px}
  .hero h1{margin:0 0 14px; font-size: clamp(2.15rem, 4.2vw, 3.1rem); color:var(--primary); line-height:1.1; letter-spacing:-.5px; text-shadow:0 3px 14px rgba(var(--primary-rgb),.28)}
  .hero h1.hero-title{color:var(--primary);} /* manter prim√°rio como base */
  .hero-title .t-white{color:#ffffff;}
  .hero-title .t-accent{color:var(--primary);}
  .hero p{margin:0 0 22px; color:var(--muted); font-size: clamp(1rem, 1.6vw, 1.25rem); max-width:860px}
      .layout{display:grid; grid-template-columns: 1.2fr 1fr; gap:22px; align-items:start}
      @media (max-width: 960px){ .layout{grid-template-columns: 1fr} }

  /* Lista de pontos no hero */
  .hero-points{list-style:none; margin:0 0 24px; padding:0; display:grid; gap:10px; max-width:640px}
  .hero-points li{background:#0f1819; border:1px solid #1f3335; padding:12px 16px; border-radius:14px; font-size:.95rem; font-weight:500; letter-spacing:.3px; line-height:1.35; position:relative}
  .hero-points li:before{content:'+'; position:absolute; left:12px; top:50%; transform:translateY(-50%); background:linear-gradient(135deg,rgba(var(--primary-rgb),.2),rgba(var(--primary-rgb),.05)); width:26px; height:26px; display:flex; align-items:center; justify-content:center; border-radius:8px; font-weight:800; color:var(--primary); border:1px solid #224c50; box-shadow:0 0 0 1px #173538 inset}
  .hero-points li{padding-left:50px}
  .event-datetime{margin:-6px 0 24px; font-size:.75rem; letter-spacing:.65px; font-weight:600; color:#9bd5da; text-transform:uppercase; background:rgba(var(--primary-rgb),.08); display:inline-block; padding:8px 14px; border:1px solid #1d3f43; border-radius:40px; box-shadow:0 0 0 1px #153438 inset}
  .form-title{margin:0 0 14px; text-align:center; font-size:1.15rem; letter-spacing:.8px; font-weight:700; color:#ffffff; background:linear-gradient(90deg,rgba(var(--primary-rgb),.15),rgba(var(--primary-rgb),.05)); border:1px solid #1d3d41; padding:12px 18px; border-radius:16px; text-transform:uppercase; box-shadow:0 0 0 1px #1a3235 inset}
  /* Countdown p√≥s-formul√°rio */
  .after-form-countdown{padding:10px 0 0;}
  .countdown-banner{margin:34px auto 0; background:#0f1819; border:1px solid #1e3335; padding:18px 20px 22px; border-radius:22px; max-width:760px; box-shadow:0 6px 28px -8px rgba(0,0,0,.6)}
  .countdown-banner h3{margin:0 0 14px; font-size:1.05rem; letter-spacing:.6px; color:var(--primary); text-transform:uppercase}
  .countdown-numbers{display:flex; gap:14px; flex-wrap:wrap}
  .cd-box{background:#132326; border:1px solid #204347; padding:12px 16px 10px; border-radius:16px; min-width:82px; text-align:center; box-shadow:0 0 0 1px #1a3d41 inset}
  .cd-box span{display:block; font-size:1.55rem; font-weight:700; letter-spacing:1px; color:var(--primary); line-height:1}
  .cd-box small{display:block; font-size:.6rem; letter-spacing:.8px; text-transform:uppercase; color:#7ea5a9; margin-top:6px; font-weight:600}
  .countdown-live{margin:16px 0 20px; background:#ff4d4d; color:#fff; padding:10px 16px; border-radius:40px; display:inline-flex; align-items:center; gap:8px; font-size:.72rem; font-weight:700; letter-spacing:.7px; box-shadow:0 0 0 1px #ff6b6b,0 0 14px -2px rgba(255,77,77,.55)}
  .countdown-ended{margin-top:16px; background:#2a2f31; color:#d5e2e3; padding:10px 16px; border-radius:40px; font-size:.7rem; font-weight:600; letter-spacing:.6px; border:1px solid #394548}
  @media (max-width:600px){ .cd-box{min-width:68px; padding:10px 12px 8px;} .cd-box span{font-size:1.3rem;} }
  .prep-callout{background:#122325;border:1px solid #1f3b3f; padding:14px 16px 14px 52px; border-radius:16px; position:relative; font-size:.82rem; line-height:1.45; color:#b7cfd2; margin:0 0 26px; max-width:640px}
  .prep-callout:before{content:"üìå"; position:absolute; left:16px; top:14px; font-size:1.2rem}
  .prep-callout strong{color:#fff}
  /* Modal Final */
  .final-overlay{position:fixed; inset:0; background:rgba(0,0,0,.78); display:flex; align-items:center; justify-content:center; padding:20px; z-index:999; backdrop-filter:blur(6px);}
  .final-modal{background:#0f1718; border:1px solid #204044; width:100%; max-width:520px; border-radius:26px; padding:34px 32px 40px; position:relative; box-shadow:0 12px 56px -10px rgba(0,0,0,.7),0 0 0 1px rgba(255,255,255,.04)}
  .final-modal h2{margin:0 0 14px; font-size:1.55rem; line-height:1.1; letter-spacing:.5px; color:var(--primary);}
  .final-modal p{margin:0 0 16px; font-size:.95rem; color:#d0e5e8; line-height:1.5}
  .prep-list{list-style:none; margin:14px 0 24px; padding:0; display:grid; gap:10px}
  .prep-list li{background:#132628; border:1px solid #21484d; padding:12px 14px 12px 48px; border-radius:14px; font-size:.8rem; position:relative; font-weight:500; letter-spacing:.3px; color:#c0dee1}
  .prep-list li:before{content:'‚úî'; position:absolute; left:16px; top:50%; transform:translateY(-50%); background:#1d4348; width:26px; height:26px; display:flex; align-items:center; justify-content:center; border-radius:8px; font-size:.9rem; color:var(--primary); font-weight:700; box-shadow:0 0 0 1px #29666d inset}
  .final-actions{display:flex; gap:12px; flex-wrap:wrap; justify-content:flex-end; margin-top:4px}
  .btn-sec{background:#173337; border:2px solid #1f4d52; color:#b8dadd; font-weight:600}
  .btn-sec:hover{background:#1d4045;}
  .cal-actions{display:flex; flex-wrap:wrap; gap:10px; margin:6px 0 18px; align-items:center}
  .btn-cal{background:#1a3b3f; border:2px solid #23646b; color:#bdf3f7; font-weight:600; padding:12px 18px; border-radius:14px; font-size:.8rem; letter-spacing:.5px; cursor:pointer; display:inline-flex; align-items:center; gap:6px; text-decoration:none}
  .btn-cal:hover{background:#215157; color:#fff}
  .btn-cal svg{width:16px; height:16px; fill:currentColor}
  .ics-link{font-size:.65rem; letter-spacing:.6px; color:#7fb9be; text-decoration:underline; cursor:pointer}
  .ics-link:hover{color:#bde9ed}
  @media (max-width:600px){ .final-modal{padding:30px 22px 36px;} }

      /* Card Form */
  .card{background:var(--card); border:1px solid var(--card-border); border-radius:22px; padding:28px 26px 34px; box-shadow:0 8px 40px -6px rgba(0,0,0,.6),0 0 0 1px rgba(255,255,255,.03); position:relative; overflow:hidden}
  .card:before{content:"";position:absolute;inset:0;pointer-events:none;background:radial-gradient(circle at 88% 12%,rgba(var(--primary-rgb),.22),transparent 60%)}
      .form-header{display:flex; gap:10px; justify-content:center; margin:4px 0 18px; flex-wrap:wrap}
      .dot{width:34px; height:34px; border-radius:50%; background:#151b1c; color:#7fa6aa; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:.85rem; border:2px solid #223235; transition:.25s}
      .dot.active{background:var(--primary); color:#001c20; border-color:var(--primary); box-shadow:0 0 0 4px rgba(var(--primary-rgb),.35)}
      .dot.done{background:#1e7e86; color:#d5f7fa; border-color:#1e7e86; opacity:.85}
      .form-step{display:none}
      .form-step.active{display:block}
      .field{display:flex; flex-direction:column; gap:8px; margin-bottom:18px}
      .field label{font-size:1rem; color:var(--text); font-weight:600; letter-spacing:.3px}
      .field input,.field textarea,.field select{background:#0b1213; color:var(--text); border:2px solid #1c2a2c; border-radius:14px; padding:15px 16px; outline:none; font-size:1rem; line-height:1.3; font-weight:500; transition:.25s}
      .field input:focus,.field textarea:focus,.field select:focus{border-color:var(--primary); box-shadow:var(--focus-ring)}
      .field input::placeholder{color:#6d7e80; font-weight:400}
      .error{color:var(--danger); font-size:.75rem; min-height:18px; letter-spacing:.4px}
      .actions{display:flex; justify-content:space-between; gap:12px; margin-top:8px}
      .btn{appearance:none; border:2px solid #204145; background:#112426; color:var(--text); padding:15px 22px; border-radius:14px; cursor:pointer; font-weight:700; letter-spacing:.5px; font-size:1rem; display:inline-flex; align-items:center; gap:6px; transition:.25s}
      .btn:hover{background:#183237; border-color:#2d5f65}
      .btn:focus-visible{outline:none; box-shadow:0 0 0 4px rgba(var(--primary-rgb),.55)}
      .btn-primary{background:var(--primary); border-color:var(--primary); color:#002b30; text-shadow:0 1px 0 rgba(255,255,255,.25)}
      .btn-primary:hover{background:#1e919b; border-color:#1e919b; color:#e6feff}
      .note{color:var(--muted); font-size:.7rem; margin-top:6px; letter-spacing:.5px}
  .option-shortcuts{display:flex; gap:8px; flex-wrap:wrap; margin:6px 0 0}
  .fill-option{border:1px solid #2a3f42; background:#142325; color:#9fc8cc; font-size:.7rem; padding:6px 10px; border-radius:10px; cursor:pointer; letter-spacing:.4px}
  .fill-option:hover{background:#1d3336; color:#ffffff}

      /* Benefits */
      .section{padding:28px 0}
  .section h2{color:var(--primary); margin:0 0 14px; font-size: clamp(1.55rem, 2.9vw, 2.15rem); letter-spacing:.5px}
      .benefits{display:grid; gap:10px; margin:0; padding:0; list-style:none}
  .benefits li{display:flex; align-items:flex-start; gap:14px; padding:16px 18px; background:#0f1819; border:1px solid #1f3335; border-radius:16px; line-height:1.42; font-size:.95rem}
      .check{color:#22e386; font-weight:700}
      .cta-wrap{margin-top:16px}
  .cta{appearance:none; background:var(--primary); color:#002b30; border:2px solid var(--primary); padding:18px 26px; border-radius:16px; font-weight:800; cursor:pointer; font-size:1.05rem; letter-spacing:.6px; box-shadow:0 6px 18px -4px rgba(var(--primary-rgb),.45)}
  .cta:hover{background:#1e919b; border-color:#1e919b; color:#e9feff}
    /* Nova lista de t√≥picos de transforma√ß√£o */
    .transform-list{display:grid; gap:14px; margin:0; padding:0; list-style:none;}
    .transform-item{position:relative; padding:18px 20px 18px 56px; background:#0f1819; border:1px solid #1f3335; border-radius:18px; font-size:1rem; font-weight:600; letter-spacing:.3px; line-height:1.35;}
    .transform-item:before{content:""; position:absolute; left:18px; top:50%; width:26px; height:26px; border-radius:8px; background:linear-gradient(135deg, rgba(var(--primary-rgb),.15), rgba(var(--primary-rgb),.05)); border:1px solid #225055; transform:translateY(-50%); box-shadow:0 0 0 1px #193a3d inset, 0 4px 10px -4px rgba(0,0,0,.6);}
    .transform-item:after{content:"+"; position:absolute; left:26px; top:50%; transform:translate(-50%,-50%); font-weight:800; color:var(--primary); font-size:1.05rem; text-shadow:0 0 6px rgba(var(--primary-rgb),.55);}
    .transform-accent{color:var(--primary); font-weight:700;}

      /* Mentor */
      .mentor{display:grid; grid-template-columns: 1fr 1.2fr; gap:18px; align-items:center}
      @media (max-width: 960px){ .mentor{grid-template-columns:1fr} }
  .mentor img{width:100%; height:auto; border-radius:16px; border:2px solid #1e3336; box-shadow:0 8px 26px -6px rgba(0,0,0,.6)}
  .mentor h3{margin:8px 0 4px; color:var(--primary); font-weight:700; font-size:1.25rem; letter-spacing:.5px}

  .scarcity{background:#0f1819;border:1px solid #1e3335;padding:14px 18px;border-radius:18px;margin-bottom:18px;display:flex;flex-direction:column;gap:8px}
  .scarcity strong{color:#ffe1a4}
  .scarcity-progress{height:12px;background:#0b1314;border:1px solid #1f3032;border-radius:24px;overflow:hidden;position:relative}
  .scarcity-progress span{display:block;height:100%;background:linear-gradient(90deg,#27abb6,#6edbe4);width:71%;position:relative;box-shadow:0 0 0 1px #1a3d41,0 0 16px -2px rgba(var(--primary-rgb),.55)}
  .tag-live{display:inline-block;background:#ff4d4d;color:#fff;font-size:.6rem;font-weight:700;padding:5px 10px;border-radius:30px;letter-spacing:.6px;box-shadow:0 0 0 1px #ff6565;margin-right:6px}
  .mini-deadline{font-size:.62rem;color:#94b4b8;letter-spacing:.6px;text-transform:uppercase}
  .cta-ribbon{background:#183437;color:#9ff6fc;font-size:.62rem;font-weight:600;padding:6px 12px;border:1px solid #205055;border-radius:40px;display:inline-flex;align-items:center;gap:6px;box-shadow:0 0 0 1px #205055 inset;letter-spacing:.7px}
      footer{color:var(--muted); font-size:.7rem; padding:24px 0 48px; letter-spacing:.5px}
      /* Ajustar radios e checkboxes maiores */
      input[type=radio],input[type=checkbox]{width:20px;height:20px;cursor:pointer; accent-color: var(--primary);}
      label>input[type=radio],label>input[type=checkbox]{margin-right:6px; transform:translateY(1px);}
      /* Aumentar espa√ßamento entre op√ß√µes de grupos */
      .form-step label input[type=radio]+span,.form-step label input[type=checkbox]+span{font-size:1rem;}
      .form-step label{font-size:.95rem; font-weight:500;}
  /* Barra de status mais leg√≠vel */
  #sendStatus{font-size:.8rem !important; letter-spacing:.4px}
  .success-state{padding:20px 22px;margin:12px 0 0;background:rgba(var(--primary-rgb),.08);border:1px solid #21494e;border-radius:18px;text-align:center;box-shadow:0 0 0 1px rgba(var(--primary-rgb),.2) inset}
  .success-state h3{margin:0 0 10px;font-size:1.2rem;color:var(--primary);letter-spacing:.5px}
  .success-state p{margin:0 0 16px;font-size:.9rem;color:#b7dfe4;line-height:1.4}
  .success-state .success-icon{font-size:2.2rem;line-height:1;margin-bottom:12px}
  .success-state .success-tip{margin-top:-4px;color:#7fa6aa;font-size:.78rem;letter-spacing:.4px}
  .form-completed .form-title{background:rgba(var(--primary-rgb),.12);color:var(--primary)}

      /* Bot√£o flutuante WhatsApp */
      .whatsapp-float{
        position:fixed;
        bottom:20px;
        right:20px;
        width:60px;
        height:60px;
        background:#25D366;
        border-radius:50%;
        display:flex;
        align-items:center;
        justify-content:center;
        box-shadow:0 4px 16px rgba(37,211,102,.4), 0 0 0 1px rgba(255,255,255,.1);
        cursor:pointer;
        transition:all .3s ease;
        z-index:1000;
        text-decoration:none;
        animation:pulse 2s infinite;
      }
      .whatsapp-float:hover{
        transform:scale(1.1);
        box-shadow:0 6px 24px rgba(37,211,102,.6), 0 0 0 1px rgba(255,255,255,.2);
      }
      .whatsapp-float svg{
        width:32px;
        height:32px;
        fill:#ffffff;
      }
      @keyframes pulse{
        0%{box-shadow:0 4px 16px rgba(37,211,102,.4), 0 0 0 1px rgba(255,255,255,.1), 0 0 0 0 rgba(37,211,102,.7);}
        70%{box-shadow:0 4px 16px rgba(37,211,102,.4), 0 0 0 1px rgba(255,255,255,.1), 0 0 0 10px rgba(37,211,102,0);}
        100%{box-shadow:0 4px 16px rgba(37,211,102,.4), 0 0 0 1px rgba(255,255,255,.1), 0 0 0 0 rgba(37,211,102,0);}
      }
      @media (max-width:600px){
        .whatsapp-float{
          bottom:88px;
          right:15px;
          width:55px;
          height:55px;
        }
        .whatsapp-float svg{
          width:28px;
          height:28px;
        }
      }
    </style>
  </head>
  <body>
    <header class="hero">
      <div class="container">
        <div class="layout">
          <div>
            <h1 class="hero-title"><span class="t-accent">Encontro UP</span> <span class="t-white">Construindo Uma Vida Mais Leve</span></h1>
            <div class="prep-callout" aria-label="Prepara√ß√£o recomendada">
              <strong>Prepare-se para aproveitar melhor:</strong> pegue <strong>papel</strong>, <strong>caneta</strong>, use <strong>fone de ouvido</strong> e esteja em um <strong>lugar tranquilo</strong>.
            </div>
            <div class="event-datetime" id="eventDatetime" data-template="Encontro ao vivo: {date} ‚Ä¢ {time} (hor√°rio de Bras√≠lia)">Encontro ao vivo: 29/01 ‚Ä¢ 19:00 √†s 21:29 (hor√°rio de Bras√≠lia)</div>
            <ul class="hero-points" aria-label="Benef√≠cios principais">
              <li><strong>menos ansiedade</strong> ... <strong>mais foco</strong></li>
              <li><strong>menos estresse</strong> ... <strong>mais qualidade de sono</strong></li>
              <li><strong>mais comunica√ß√£o assertiva</strong></li>
              <li><strong>mais relacionamentos saud√°veis</strong></li>
              <li><strong>mais sa√∫de f√≠sica e emocional</strong></li>
            </ul>
            <div class="scarcity" aria-label="Indicador de vagas restantes">
              <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
                <div id="scarcityPercent" data-template="{percent}% das vagas preenchidas" style="font-size:13px;font-weight:600;color:#cfd2ff;">71% das vagas preenchidas</div>
                <div class="cta-ribbon">Vagas Limitadas</div>
              </div>
              <div class="scarcity-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="71"><span></span></div>
              <div class="mini-deadline">Movimento alto hoje ‚Äî confirme enquanto ainda h√° acesso.</div>
            </div>
          </div>
          <div>
            <div id="formCard" class="card">
              <div style="text-align:center; margin:-4px 0 16px; padding:10px 14px; background:rgba(var(--primary-rgb),.08); border:1px solid #1d3f43; border-radius:12px;">
                <div style="font-size:.7rem; color:#8fb8bc; letter-spacing:.6px; text-transform:uppercase; margin-bottom:4px;">Investimento</div>
                <div style="font-size:1.4rem; font-weight:700; color:var(--primary); letter-spacing:.5px;">R$ 197,00</div>
              </div>
              <h2 class="form-title" id="formTitle">GARANTA SUA VAGA AGORA</h2>
              <div class="form-header" id="progressDots" aria-label="Progresso do formul√°rio">
                <div class="dot" data-step="0">1</div>
                <div class="dot" data-step="1">2</div>
                <div class="dot" data-step="2">3</div>
                <div class="dot" data-step="3">4</div>
                <div class="dot" data-step="4">5</div>
                <div class="dot" data-step="5">6</div>
                <div class="dot" data-step="6">7</div>
                <div class="dot" data-step="7">8</div>
                <div class="dot" data-step="8">9</div>
                <div class="dot" data-step="9">10</div>
                <div class="dot" data-step="10">11</div>
                <div class="dot" data-step="11">12</div>
                <div class="dot" data-step="12">13</div>
                <div class="dot" data-step="13">14</div>
                <div class="dot" data-step="14">15</div>
              </div>
              <div id="progressText" style="text-align:center;font-size:12px;color:#8aa0ff;margin:-4px 0 12px;">Etapa 1 de 15</div>

              <div id="formSuccess" class="success-state" hidden role="status" aria-live="polite">
                <div class="success-icon" aria-hidden="true">‚úÖ</div>
                <h3>Cadastro confirmado!</h3>
                <p>Recebemos suas informa√ß√µes. Voc√™ receber√° as orienta√ß√µes oficiais no WhatsApp e no e-mail informado.</p>
                <p class="success-tip">N√£o √© necess√°rio enviar novamente. Caso precise ajustar os dados, clique no bot√£o abaixo.</p>
                <button type="button" class="btn btn-primary" id="successReset" style="justify-content:center;">Preciso editar os dados</button>
              </div>

              <form id="msForm" novalidate>
                <!-- Etapa 1: Dados Pessoais -->
                <div class="form-step active" data-step="0">
                  <div class="field">
                    <label for="nome">Nome Completo</label>
                    <input id="nome" name="nome" type="text" placeholder="Seu nome completo" required />
                    <div class="error" data-for="nome"></div>
                  </div>
                  <div class="field">
                    <label for="cidade">Cidade</label>
                    <input id="cidade" name="cidade" type="text" placeholder="Sua cidade" required />
                    <div class="error" data-for="cidade"></div>
                  </div>
                  <div class="field">
                    <label for="telefone">Telefone</label>
                    <input id="telefone" name="telefone" type="tel" inputmode="tel" placeholder="(00) 00000-0000" required />
                    <div class="error" data-for="telefone"></div>
                  </div>
                  <div class="actions">
                    <span></span>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 2: Informa√ß√µes Adicionais -->
                <div class="form-step" data-step="1">
                  <div class="field">
                    <label for="idade">Idade</label>
                    <input id="idade" name="idade" type="number" min="0" max="120" placeholder="Sua idade" required />
                    <div class="error" data-for="idade"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 3: N√≠vel de Ansiedade -->
                <div class="form-step" data-step="2">
                  <div class="field">
                    <label>Como est√° seu n√≠vel de ansiedade?</label>
                    <label><input type="radio" name="ansiedade" value="Muito ansioso" required /> Muito ansioso</label>
                    <label><input type="radio" name="ansiedade" value="Ansioso" /> Ansioso</label>
                    <label><input type="radio" name="ansiedade" value="Controlado" /> Controlado</label>
                    <label><input type="radio" name="ansiedade" value="Pouco ansioso" /> Pouco ansioso</label>
                    <label><input type="radio" name="ansiedade" value="N√£o tenho ansiedade" /> N√£o tenho ansiedade</label>
                    <label><input type="radio" name="ansiedade" value="N√£o sei" /> N√£o sei</label>
                    <label><input type="radio" name="ansiedade" value="N√£o quero responder" /> N√£o quero responder</label>
                    <div class="error" data-for="ansiedade"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 4: Qualidade do Sono -->
                <div class="form-step" data-step="3">
                  <div class="field">
                    <label>Como est√° sua qualidade do sono?</label>
                    <label><input type="radio" name="sono" value="Muito Boa" required /> Muito Boa</label>
                    <label><input type="radio" name="sono" value="Boa" /> Boa</label>
                    <label><input type="radio" name="sono" value="Regular" /> Regular</label>
                    <label><input type="radio" name="sono" value="Ruim" /> Ruim</label>
                    <label><input type="radio" name="sono" value="Muito ruim" /> Muito ruim</label>
                    <label><input type="radio" name="sono" value="N√£o sei" /> N√£o sei</label>
                    <label><input type="radio" name="sono" value="N√£o quero responder" /> N√£o quero responder</label>
                    <div class="error" data-for="sono"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 5: Vida Financeira -->
                <div class="form-step" data-step="4">
                  <div class="field">
                    <label>Como est√° sua vida financeira?</label>
                    <label><input type="radio" name="vida_financeira" value="Muito Boa" required /> Muito Boa</label>
                    <label><input type="radio" name="vida_financeira" value="Boa" /> Boa</label>
                    <label><input type="radio" name="vida_financeira" value="Regular" /> Regular</label>
                    <label><input type="radio" name="vida_financeira" value="Ruim" /> Ruim</label>
                    <label><input type="radio" name="vida_financeira" value="Muito ruim" /> Muito ruim</label>
                    <label><input type="radio" name="vida_financeira" value="N√£o sei" /> N√£o sei</label>
                    <label><input type="radio" name="vida_financeira" value="N√£o quero responder" /> N√£o quero responder</label>
                    <div class="error" data-for="vida_financeira"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 6: Sa√∫de F√≠sica -->
                <div class="form-step" data-step="5">
                  <div class="field">
                    <label>Como est√° sua sa√∫de f√≠sica?</label>
                    <label><input type="radio" name="saude_fisica" value="Muito Boa" required /> Muito Boa</label>
                    <label><input type="radio" name="saude_fisica" value="Boa" /> Boa</label>
                    <label><input type="radio" name="saude_fisica" value="Regular" /> Regular</label>
                    <label><input type="radio" name="saude_fisica" value="Ruim" /> Ruim</label>
                    <label><input type="radio" name="saude_fisica" value="Muito ruim" /> Muito ruim</label>
                    <label><input type="radio" name="saude_fisica" value="N√£o sei" /> N√£o sei</label>
                    <label><input type="radio" name="saude_fisica" value="N√£o quero responder" /> N√£o quero responder</label>
                    <div class="error" data-for="saude_fisica"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 7: Relacionamentos Familiares -->
                <div class="form-step" data-step="6">
                  <div class="field">
                    <label>Como est√° a qualidade dos seus relacionamentos familiares?</label>
                    <label><input type="radio" name="relacionamentos_familiares" value="Muito Boa" required /> Muito Boa</label>
                    <label><input type="radio" name="relacionamentos_familiares" value="Boa" /> Boa</label>
                    <label><input type="radio" name="relacionamentos_familiares" value="Regular" /> Regular</label>
                    <label><input type="radio" name="relacionamentos_familiares" value="Ruim" /> Ruim</label>
                    <label><input type="radio" name="relacionamentos_familiares" value="Muito ruim" /> Muito ruim</label>
                    <label><input type="radio" name="relacionamentos_familiares" value="N√£o tenho fam√≠lia pr√≥xima" /> N√£o tenho fam√≠lia pr√≥xima</label>
                    <label><input type="radio" name="relacionamentos_familiares" value="N√£o sei" /> N√£o sei</label>
                    <label><input type="radio" name="relacionamentos_familiares" value="N√£o quero responder" /> N√£o quero responder</label>
                    <div class="error" data-for="relacionamentos_familiares"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 8: Relacionamento Amoroso -->
                <div class="form-step" data-step="7">
                  <div class="field">
                    <label>Como est√° seu relacionamento amoroso?</label>
                    <label><input type="radio" name="relacionamento" value="Muito Bom" required /> Muito Bom</label>
                    <label><input type="radio" name="relacionamento" value="Bom" /> Bom</label>
                    <label><input type="radio" name="relacionamento" value="Regular" /> Regular</label>
                    <label><input type="radio" name="relacionamento" value="Ruim" /> Ruim</label>
                    <label><input type="radio" name="relacionamento" value="Muito ruim" /> Muito ruim</label>
                    <label><input type="radio" name="relacionamento" value="N√£o tenho" /> N√£o tenho</label>
                    <label><input type="radio" name="relacionamento" value="N√£o sei" /> N√£o sei</label>
                    <label><input type="radio" name="relacionamento" value="N√£o quero responder" /> N√£o quero responder</label>
                    <div class="error" data-for="relacionamento"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 9: √Åreas para Melhorar -->
                <div class="form-step" data-step="8">
                  <div class="field">
                    <label>Quais √°reas voc√™ quer melhorar? (marque quantas desejar)</label>
                    <label><input type="checkbox" name="areas_melhoria" value="Sa√∫de emocional" data-required-group="areas_melhoria" /> Sa√∫de emocional</label>
                    <label><input type="checkbox" name="areas_melhoria" value="Sa√∫de f√≠sica" data-required-group="areas_melhoria" /> Sa√∫de f√≠sica</label>
                    <label><input type="checkbox" name="areas_melhoria" value="Rela√ß√µes familiares" data-required-group="areas_melhoria" /> Rela√ß√µes familiares</label>
                    <label><input type="checkbox" name="areas_melhoria" value="Rela√ß√£o amorosa" data-required-group="areas_melhoria" /> Rela√ß√£o amorosa</label>
                    <label><input type="checkbox" name="areas_melhoria" value="√Årea financeira" data-required-group="areas_melhoria" /> √Årea financeira</label>
                    <label><input type="checkbox" name="areas_melhoria" value="√Årea profissional" data-required-group="areas_melhoria" /> √Årea profissional</label>
                    <label><input type="checkbox" name="areas_melhoria" value="N√≠vel de ansiedade/estresse" data-required-group="areas_melhoria" /> N√≠vel de ansiedade/estresse</label>
                    <label><input type="checkbox" name="areas_melhoria" value="Qualidade do sono" data-required-group="areas_melhoria" /> Qualidade do sono</label>
                    <label><input type="checkbox" name="areas_melhoria" value="Comunica√ß√£o" data-required-group="areas_melhoria" /> Comunica√ß√£o</label>
                    <label><input type="checkbox" name="areas_melhoria" value="Lideran√ßa" data-required-group="areas_melhoria" /> Lideran√ßa</label>
                    <label><input type="checkbox" name="areas_melhoria" value="N√£o sei" data-required-group="areas_melhoria" /> N√£o sei</label>
                    <label><input type="checkbox" name="areas_melhoria" value="N√£o quero responder" data-required-group="areas_melhoria" /> N√£o quero responder</label>
                    <div class="error" data-for="areas_melhoria"></div>
                  </div>
                  <div class="note">Avance para informar brevemente seu trabalho ou profiss√£o.</div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 10: Trabalho ou Profiss√£o -->
                <div class="form-step" data-step="9">
                  <div class="field">
                    <label for="profissao_area">Qual √© o seu trabalho ou profiss√£o?</label>
                    <input id="profissao_area" name="profissao_area" type="text" placeholder="Ex.: Professor(a), Empreendedor(a), Analista, Estudante" required />
                    <div class="note">Se preferir n√£o informar, escolha uma das op√ß√µes abaixo.</div>
                    <div class="option-shortcuts" data-target="profissao_area">
                      <button type="button" class="fill-option" data-target="profissao_area" data-value="N√£o sei">N√£o sei</button>
                      <button type="button" class="fill-option" data-target="profissao_area" data-value="N√£o quero responder">N√£o quero responder</button>
                    </div>
                    <div class="error" data-for="profissao_area"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 11: Gatilhos Principais -->
                <div class="form-step" data-step="10">
                  <div class="field">
                    <label>Quais situa√ß√µes mais disparam sua ansiedade ou estresse? (marque todas)</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="Press√£o no trabalho" data-required-group="gatilhos_ansiedade" /> Press√£o no trabalho</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="Demandas familiares" data-required-group="gatilhos_ansiedade" /> Demandas familiares</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="Quest√µes financeiras" data-required-group="gatilhos_ansiedade" /> Quest√µes financeiras</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="Sa√∫de f√≠sica" data-required-group="gatilhos_ansiedade" /> Sa√∫de f√≠sica</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="Relacionamentos amorosos" data-required-group="gatilhos_ansiedade" /> Relacionamentos amorosos</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="Autocobran√ßa e perfeccionismo" data-required-group="gatilhos_ansiedade" /> Autocobran√ßa e perfeccionismo</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="Incertezas sobre o futuro" data-required-group="gatilhos_ansiedade" /> Incertezas sobre o futuro</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="N√£o sei" data-required-group="gatilhos_ansiedade" /> N√£o sei</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="N√£o quero responder" data-required-group="gatilhos_ansiedade" /> N√£o quero responder</label>
                    <label><input type="checkbox" name="gatilhos_ansiedade" value="Outros" data-required-group="gatilhos_ansiedade" /> Outros</label>
                    <div class="error" data-for="gatilhos_ansiedade"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 12: Sintomas F√≠sicos -->
                <div class="form-step" data-step="11">
                  <div class="field">
                    <label>Quais sintomas f√≠sicos sente com mais frequ√™ncia? (marque todas)</label>
                    <label><input type="checkbox" name="sintomas_fisicos" value="Tens√£o muscular" data-required-group="sintomas_fisicos" /> Tens√£o muscular</label>
                    <label><input type="checkbox" name="sintomas_fisicos" value="Altera√ß√µes no sono" data-required-group="sintomas_fisicos" /> Altera√ß√µes no sono</label>
                    <label><input type="checkbox" name="sintomas_fisicos" value="Taquicardia" data-required-group="sintomas_fisicos" /> Taquicardia</label>
                    <label><input type="checkbox" name="sintomas_fisicos" value="Falta de ar" data-required-group="sintomas_fisicos" /> Falta de ar</label>
                    <label><input type="checkbox" name="sintomas_fisicos" value="Queda de energia" data-required-group="sintomas_fisicos" /> Queda de energia</label>
                    <label><input type="checkbox" name="sintomas_fisicos" value="Problemas digestivos" data-required-group="sintomas_fisicos" /> Problemas digestivos</label>
                    <label><input type="checkbox" name="sintomas_fisicos" value="N√£o sei" data-required-group="sintomas_fisicos" /> N√£o sei</label>
                    <label><input type="checkbox" name="sintomas_fisicos" value="N√£o quero responder" data-required-group="sintomas_fisicos" /> N√£o quero responder</label>
                    <label><input type="checkbox" name="sintomas_fisicos" value="Outros" data-required-group="sintomas_fisicos" /> Outros</label>
                    <div class="error" data-for="sintomas_fisicos"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 13: Sintomas Emocionais -->
                <div class="form-step" data-step="12">
                  <div class="field">
                    <label>Quais sinais emocionais percebe em voc√™? (marque todas)</label>
                    <label><input type="checkbox" name="sintomas_emocionais" value="Ansiedade constante" data-required-group="sintomas_emocionais" /> Ansiedade constante</label>
                    <label><input type="checkbox" name="sintomas_emocionais" value="Oscila√ß√£o de humor" data-required-group="sintomas_emocionais" /> Oscila√ß√£o de humor</label>
                    <label><input type="checkbox" name="sintomas_emocionais" value="Irritabilidade" data-required-group="sintomas_emocionais" /> Irritabilidade</label>
                    <label><input type="checkbox" name="sintomas_emocionais" value="Sensa√ß√£o de impot√™ncia" data-required-group="sintomas_emocionais" /> Sensa√ß√£o de impot√™ncia</label>
                    <label><input type="checkbox" name="sintomas_emocionais" value="Des√¢nimo / falta de motiva√ß√£o" data-required-group="sintomas_emocionais" /> Des√¢nimo / falta de motiva√ß√£o</label>
                    <label><input type="checkbox" name="sintomas_emocionais" value="Dificuldade de concentra√ß√£o" data-required-group="sintomas_emocionais" /> Dificuldade de concentra√ß√£o</label>
                    <label><input type="checkbox" name="sintomas_emocionais" value="N√£o sei" data-required-group="sintomas_emocionais" /> N√£o sei</label>
                    <label><input type="checkbox" name="sintomas_emocionais" value="N√£o quero responder" data-required-group="sintomas_emocionais" /> N√£o quero responder</label>
                    <label><input type="checkbox" name="sintomas_emocionais" value="Outros" data-required-group="sintomas_emocionais" /> Outros</label>
                    <div class="error" data-for="sintomas_emocionais"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 14: O que j√° tentou -->
                <div class="form-step" data-step="13">
                  <div class="field">
                    <label>O que j√° tentou para lidar com isso? (marque todas)</label>
                    <label><input type="checkbox" name="tentativas_anteriores" value="Psicoterapia" data-required-group="tentativas_anteriores" /> Psicoterapia</label>
                    <label><input type="checkbox" name="tentativas_anteriores" value="Atividade f√≠sica" data-required-group="tentativas_anteriores" /> Atividade f√≠sica</label>
                    <label><input type="checkbox" name="tentativas_anteriores" value="Medita√ß√£o ou respira√ß√£o" data-required-group="tentativas_anteriores" /> Medita√ß√£o ou respira√ß√£o</label>
                    <label><input type="checkbox" name="tentativas_anteriores" value="Medicamentos" data-required-group="tentativas_anteriores" /> Medicamentos</label>
                    <label><input type="checkbox" name="tentativas_anteriores" value="Cursos ou workshops" data-required-group="tentativas_anteriores" /> Cursos ou workshops</label>
                    <label><input type="checkbox" name="tentativas_anteriores" value="N√£o tentei nada ainda" data-required-group="tentativas_anteriores" /> N√£o tentei nada ainda</label>
                    <label><input type="checkbox" name="tentativas_anteriores" value="N√£o sei" data-required-group="tentativas_anteriores" /> N√£o sei</label>
                    <label><input type="checkbox" name="tentativas_anteriores" value="N√£o quero responder" data-required-group="tentativas_anteriores" /> N√£o quero responder</label>
                    <label><input type="checkbox" name="tentativas_anteriores" value="Outros" data-required-group="tentativas_anteriores" /> Outros</label>
                    <div class="error" data-for="tentativas_anteriores"></div>
                  </div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="button" class="btn btn-primary" data-next>PR√ìXIMO</button>
                  </div>
                </div>

                <!-- Etapa 15: Observa√ß√µes Finais -->
                <div class="form-step" data-step="14">
                  <div class="field">
                    <label>Como conheceu o Instituto UP?</label>
                    <label><input type="radio" name="como_conheceu" value="Instagram" required /> Instagram</label>
                    <label><input type="radio" name="como_conheceu" value="Indica√ß√£o" /> Indica√ß√£o</label>
                    <label><input type="radio" name="como_conheceu" value="Pesquisa Google" /> Pesquisa Google</label>
                    <label><input type="radio" name="como_conheceu" value="N√£o sei" /> N√£o sei</label>
                    <label><input type="radio" name="como_conheceu" value="N√£o quero responder" /> N√£o quero responder</label>
                    <label><input type="radio" name="como_conheceu" value="Outro" /> Outro</label>
                    <div class="error" data-for="como_conheceu"></div>
                  </div>
                  <div class="field">
                    <label for="comentarios_adicionais">Expectativas ou coment√°rios adicionais</label>
                    <textarea id="comentarios_adicionais" name="comentarios_adicionais" rows="3" placeholder="Compartilhe expectativas, d√∫vidas ou contexto." required></textarea>
                    <div class="note">Se n√£o quiser detalhar, clique em uma das op√ß√µes r√°pidas abaixo.</div>
                    <div class="option-shortcuts" data-target="comentarios_adicionais">
                      <button type="button" class="fill-option" data-target="comentarios_adicionais" data-value="Nenhuma observa√ß√£o no momento">Nenhuma observa√ß√£o</button>
                      <button type="button" class="fill-option" data-target="comentarios_adicionais" data-value="N√£o quero responder">N√£o quero responder</button>
                    </div>
                    <div class="error" data-for="comentarios_adicionais"></div>
                  </div>
                  <div class="note">Obrigado! Suas respostas nos ajudam a personalizar o acompanhamento ap√≥s o encontro.</div>
                  <div class="actions">
                    <button type="button" class="btn" data-back>VOLTAR</button>
                    <button type="submit" class="btn btn-primary">FINALIZAR</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <!-- se√ß√£o de transforma√ß√µes removida conforme solicita√ß√£o -->

      <div class="after-form-countdown" aria-live="polite">
        <div class="countdown-banner" id="afterCountdown" data-date="">
          <h3 id="countdownTitle" data-template="Encontro {date} ‚Ä¢ {timeRangeShort}">Encontro 29/01 ‚Ä¢ 19:00 ‚Äì 21:29</h3>
          <div id="afLive" class="countdown-live" hidden>üî¥ AO VIVO EM</div>
          <div class="countdown-numbers" aria-label="Tempo restante">
            <div class="cd-box"><span id="afDays">00</span><small>Dias</small></div>
            <div class="cd-box"><span id="afHours">00</span><small>Horas</small></div>
            <div class="cd-box"><span id="afMinutes">00</span><small>Min</small></div>
            <div class="cd-box"><span id="afSeconds">00</span><small>Seg</small></div>
          </div>
          <div id="afEnded" class="countdown-ended" hidden>EVENTO ENCERRADO</div>
        </div>
      </div>

      <section class="section">
        <div class="container mentor">
          <div>
            <img src="img/rodrigo-damaceno.jpg" alt="Rodrigo Damaceno - Especialista em Intelig√™ncia Emocional" loading="lazy" />
          </div>
          <div>
            <h2>Quem conduz a experi√™ncia?</h2>
            <h3>Rodrigo Damaceno</h3>
            <p>Especialista em intelig√™ncia emocional e comunica√ß√£o de lideran√ßa, Rodrigo ajuda as pessoas a reconhecerem padr√µes reativos, reorganizar seu estado interno e aplicar t√©cnicas eficazes de regula√ß√£o emocional em situa√ß√µes de press√£o. Neste encontro pr√°tico, voc√™ n√£o apenas aprender√° teoria, mas tamb√©m experimentar√° mudan√ßas fisiol√≥gicas reais e sair√° com uma ferramenta pr√°tica para gerenciar a ansiedade em momentos desafiadores.</p>
          </div>
        </div>
      </section>
    </main>

    <script>
      // =============================================
      // Configura√ß√µes & Op√ß√µes Avan√ßadas
      // =============================================
    // Ajuste a data do treinamento aqui para atualizar a p√°gina inteira e o payload automaticamente
    const TRAINING_CONFIG = {
      startISO: '2026-02-25T19:00:00-03:00',
      endISO: '2026-02-26T21:29:00-03:00',
      dateDisplay: '25 e 26/02',
      timeRange: '19:00 √†s 21:29',
      timeRangeShort: '19:00 ‚Äì 21:29',
      occupancyStartISO: '2026-02-14T00:00:00-03:00',
      occupancyMinPercent: 71,
      occupancyMaxPercent: 98
    };

    // Endpoint padr√£o da API (pode ser sobrescrito com ?endpoint=https://...)
    const API_ENDPOINT = '/api/inscricao';
    // URL de redirecionamento opcional ap√≥s sucesso (deixe vazio se n√£o quiser redirecionar)
    const REDIRECT_URL = '';// ex: 'https://seusite.com/obrigado'
      // Tempo (ms) antes de redirecionar automaticamente (se REDIRECT_URL n√£o for vazio)
      const REDIRECT_DELAY = 3200;

      // Campos esperados para padronizar o payload (ordem e exist√™ncia est√°vel)
      const EXPECTED_FIELDS = [
        'nome','cidade','telefone','idade',
        'ansiedade','sono','vida_financeira','saude_fisica','relacionamentos_familiares','relacionamento','areas_melhoria',
        'profissao_area','gatilhos_ansiedade',
        'sintomas_fisicos','sintomas_emocionais',
        'tentativas_anteriores',
        'como_conheceu','comentarios_adicionais',
        // Campos de tracking e segmenta√ß√£o
        'traffic_source','from_bio','is_whatsapp_traffic','is_bio_traffic','audience_segment',
        'data_treinamento'
      ];
      const ARRAY_FIELDS = new Set(['areas_melhoria','gatilhos_ansiedade','sintomas_fisicos','sintomas_emocionais','tentativas_anteriores']);
      // Se true: quando usu√°rio apaga conte√∫do de um campo texto/number, enviamos null (limpa no acumulado)
      // Se false: ignoramos campo vazio e preservamos valor anterior j√° capturado
      const NULLIFY_ON_EMPTY = false;

      // Captura UTMs & origem / primeira visita + par√¢metros espec√≠ficos da bio
      const utmData = (function(){
        const p = new URLSearchParams(location.search);
        const obj = {};
        // UTMs tradicionais
        ['utm_source','utm_medium','utm_campaign','utm_term','utm_content'].forEach(k=>{ if(p.get(k)) obj[k]=p.get(k); });
        
        // Par√¢metros espec√≠ficos para identificar tr√°fego da bio/WhatsApp
        const source = p.get('source') || p.get('src') || p.get('origem');
        if(source) obj.traffic_source = source;
        
        const bio = p.get('bio') || p.get('whatsapp') || p.get('wa');
        if(bio) obj.from_bio = bio;
        
        // Detecta automaticamente se veio do WhatsApp pelo referrer
        const ref = document.referrer;
        if(ref) {
          obj.referrer = ref;
          if(ref.includes('whatsapp') || ref.includes('wa.me')) {
            obj.is_whatsapp_traffic = true;
            obj.traffic_source = obj.traffic_source || 'whatsapp';
          }
        }
        
        // Marca especificamente tr√°fego da bio
        if(source === 'bio' || bio || p.get('utm_source') === 'whatsapp' || p.get('utm_source') === 'bio') {
          obj.is_bio_traffic = true;
          obj.audience_segment = 'bio_whatsapp';
        }
        
        obj.landing_first_visit = (function(){
          try{
            const k='lp:firstVisit';
            let v=localStorage.getItem(k);
            if(!v){ v=new Date().toISOString(); localStorage.setItem(k,v);} return v;
          }catch{return new Date().toISOString();}
        })();
        return obj;
      })();

      (function applyTrainingConfig(){
        const { dateDisplay, timeRange, timeRangeShort, startISO } = TRAINING_CONFIG;
        const eventDt = document.getElementById('eventDatetime');
        if(eventDt){
          const template = eventDt.dataset.template || eventDt.textContent;
          eventDt.textContent = template.replace('{date}', dateDisplay).replace('{time}', timeRange);
        }
        const countdownTitle = document.getElementById('countdownTitle');
        if(countdownTitle){
          const template = countdownTitle.dataset.template || countdownTitle.textContent;
          countdownTitle.textContent = template.replace('{date}', dateDisplay).replace('{timeRangeShort}', timeRangeShort);
        }
        const countdownRoot = document.getElementById('afterCountdown');
        if(countdownRoot){
          countdownRoot.setAttribute('data-date', startISO);
        }
      })();

      function updateScarcityProgress(){
        const percentLabel = document.getElementById('scarcityPercent');
        const progressBar = document.querySelector('.scarcity-progress');
        const progressFill = progressBar ? progressBar.querySelector('span') : null;
        const { startISO, occupancyStartISO, occupancyMinPercent, occupancyMaxPercent } = TRAINING_CONFIG;
        if(!percentLabel || !progressBar || !progressFill || !startISO) return;

        const eventStart = new Date(startISO);
        const windowStart = occupancyStartISO ? new Date(occupancyStartISO) : new Date(eventStart.getTime() - 7 * 24 * 60 * 60 * 1000);
        const now = new Date();

        const min = Number(occupancyMinPercent ?? 0);
        const max = Number(occupancyMaxPercent ?? 100);
        let precise = min;

        if(now >= eventStart){
          precise = max;
        } else if(now <= windowStart){
          precise = min;
        } else {
          const totalWindow = eventStart - windowStart;
          const elapsed = now - windowStart;
          const ratio = totalWindow > 0 ? elapsed / totalWindow : 1;
          precise = min + (max - min) * Math.min(Math.max(ratio, 0), 1);
        }

        const display = Math.round(Math.min(Math.max(precise, min), max));
        progressFill.style.width = `${precise.toFixed(2)}%`;
        progressBar.setAttribute('aria-valuenow', String(display));
        const template = percentLabel.dataset.template || percentLabel.textContent;
        percentLabel.textContent = template.replace('{percent}', display);
      }
      function getEndpoint(){
        const u = new URL(location.href);
        const p = u.searchParams.get('endpoint');
        if(p && p.trim()) return p.trim();
        return API_ENDPOINT;
      }

  const form = document.getElementById('msForm');
  const steps = Array.from(document.querySelectorAll('.form-step'));
  const dots = Array.from(document.querySelectorAll('#progressDots .dot'));
  const progressTextEl = document.getElementById('progressText');
  if(progressTextEl) progressTextEl.textContent = `Etapa 1 de ${steps.length}`;
  const formCard = document.getElementById('formCard');
  const successBlock = document.getElementById('formSuccess');
  const successResetBtn = document.getElementById('successReset');
  const formTitleEl = document.getElementById('formTitle');
      // (Contagem regressiva removida a pedido)
      // Adiciona elemento de status
      let sendStatus = document.getElementById('sendStatus');
      if(!sendStatus){
        sendStatus = document.createElement('div');
        sendStatus.id = 'sendStatus';
        sendStatus.style.cssText = 'margin:8px 0 2px;font-size:12px;color:#8aa0ff;min-height:16px;';
        formCard.insertBefore(sendStatus, formCard.firstChild.nextSibling);
      }

  let current = 0;
  let isSubmitting = false;
  let submitBtnOriginalText = '';
  // Recupera ou gera clientId (permite continuar preenchimento interrompido)
  let clientId = (function(){
    try{
      const stored = sessionStorage.getItem('up:clientId');
      if(stored) return stored;
      const newId = cryptoRandomId();
      sessionStorage.setItem('up:clientId', newId);
      return newId;
    }catch{
      return cryptoRandomId();
    }
  })();
  const allData = (function(){
    try{
      const stored = sessionStorage.getItem('up:formData');
      return stored ? JSON.parse(stored) : {};
    }catch{
      return {};
    }
  })(); // acumulador com dados recuperados

  const PHONE_STORAGE_KEY = 'up:registeredPhones';
  const PHONE_VERSION_KEY = 'up:phoneVersion';
  const PHONE_VERSION_VALUE = `event-${TRAINING_CONFIG.startISO.slice(0,10)}`;

  (function ensurePhoneStorageVersion(){
    try{
      const current = localStorage.getItem(PHONE_VERSION_KEY);
      if(current !== PHONE_VERSION_VALUE){
        localStorage.removeItem(PHONE_STORAGE_KEY);
        localStorage.setItem(PHONE_VERSION_KEY, PHONE_VERSION_VALUE);
      }
    }catch{
      console.warn('N√£o foi poss√≠vel sincronizar a vers√£o dos telefones cadastrados');
    }
  })();

  function normalizePhone(phone){
    return (phone || '').replace(/\D+/g,'');
  }

  function getRegisteredPhones(){
    try{
      const raw = localStorage.getItem(PHONE_STORAGE_KEY);
      if(!raw) return [];
      const parsed = JSON.parse(raw);
      return Array.isArray(parsed) ? parsed : [];
    }catch{
      return [];
    }
  }

  function isPhoneAlreadyRegistered(phone){
    const normalized = normalizePhone(phone);
    if(!normalized) return false;
    return getRegisteredPhones().includes(normalized);
  }

  function addRegisteredPhone(phone){
    const normalized = normalizePhone(phone);
    if(!normalized) return;
    const list = getRegisteredPhones();
    if(list.includes(normalized)) return;
    list.push(normalized);
    try{
      localStorage.setItem(PHONE_STORAGE_KEY, JSON.stringify(list));
    }catch{
      console.warn('Falha ao salvar n√∫mero no storage');
    }
  }

  function setSubmitButtonDisabled(disabled){
    const btn = form ? form.querySelector('button[type="submit"]') : null;
    if(!btn) return;
    if(disabled){
      if(!submitBtnOriginalText) submitBtnOriginalText = btn.textContent || '';
      btn.disabled = true;
      btn.setAttribute('aria-busy','true');
      btn.classList.add('is-submitting');
      btn.textContent = 'Enviando...';
    } else {
      btn.disabled = false;
      btn.removeAttribute('aria-busy');
      btn.classList.remove('is-submitting');
      if(submitBtnOriginalText) btn.textContent = submitBtnOriginalText;
    }
  }

  // M√°scara de telefone din√¢mica (formato brasileiro)
  (function(){
    const telInput = document.getElementById('telefone');
    if(!telInput) return;
    telInput.addEventListener('input', ()=>{
      const digits = telInput.value.replace(/\D+/g,'').slice(0,11);
      let out = digits;
      if(digits.length > 10){
        out = `(${digits.slice(0,2)}) ${digits.slice(2,7)}-${digits.slice(7)}`;
      } else if(digits.length > 6){
        out = `(${digits.slice(0,2)}) ${digits.slice(2,6)}-${digits.slice(6)}`;
      } else if(digits.length > 2){
        out = `(${digits.slice(0,2)}) ${digits.slice(2)}`;
      } else if(digits.length > 0){
        out = '('+digits;
      }
      telInput.value = out;
    });
  })();

    (function initFillOptions(){
      const buttons = document.querySelectorAll('.fill-option');
      buttons.forEach(btn =>{
        btn.addEventListener('click', ()=>{
          const targetId = btn.dataset.target;
          const value = btn.dataset.value || '';
          if(!targetId) return;
          const target = document.getElementById(targetId);
          if(!target) return;
          target.value = value;
          target.focus();
        });
      });
    })();

      function handleOtherToggle(element){
        const targetId = element.dataset.otherInput;
        if(!targetId) return;
        const input = document.getElementById(targetId);
        if(!input) return;
        let wrapper = document.getElementById(`${targetId}_wrapper`);
        if(!wrapper && input.parentElement){
          wrapper = input.parentElement;
        }
        let shouldShow = false;
        if(element.type === 'checkbox'){
          shouldShow = element.checked;
        } else if(element.type === 'radio'){
          const group = form.querySelectorAll(`input[name="${element.name}"]`);
          shouldShow = Array.from(group).some(r => r.checked && r.dataset.otherInput === targetId);
        }
        if(wrapper){ wrapper.hidden = !shouldShow; }
        if(!shouldShow){ input.value = ''; }
      }

      function initOtherToggles(){
        const toggles = form.querySelectorAll('[data-other-input]');
        toggles.forEach(el => {
          if(el.type === 'radio'){
            const group = form.querySelectorAll(`input[name="${el.name}"]`);
            group.forEach(gr => gr.addEventListener('change', ()=> handleOtherToggle(el)));
          } else {
            el.addEventListener('change', ()=> handleOtherToggle(el));
          }
          handleOtherToggle(el);
        });
      }

      function showStep(n){
        current = Math.max(0, Math.min(steps.length-1, n));
        steps.forEach((el, idx)=>{
          el.classList.toggle('active', idx === current);
        });
        dots.forEach((d, idx)=>{
          d.classList.remove('active','done');
          if(idx < current) d.classList.add('done');
          if(idx === current) d.classList.add('active');
        });
        const pt = document.getElementById('progressText');
        if(pt) pt.textContent = `Etapa ${current+1} de ${steps.length}`;

        // Scroll inteligente: tenta mostrar todo o card se couber, sen√£o vai pro topo
        const card = document.getElementById('formCard');
        if(card){
          setTimeout(()=>{
            const rect = card.getBoundingClientRect();
            const winH = window.innerHeight;
            // Se o card for menor que a janela (cabe tudo), centraliza
            if(rect.height < winH - 40){ 
              card.scrollIntoView({block: 'center', behavior: 'smooth'});
            } else {
              // Se for maior, alinha ao topo com margem suave
              const y = rect.top + window.pageYOffset - 20;
              window.scrollTo({top: y, behavior: 'smooth'});
            }
          }, 100);
        }
      }

      // Valida√ß√£o da etapa atual
      function validateCurrent(){
        const section = steps[current];
        if(!section) return true;
        let valid = true;
        // Limpa mensagens antigas
        section.querySelectorAll('.error').forEach(el=> el.textContent='');
        
        // Agrupar radios por name para checar uma vez
        const radiosChecked = new Set();
        // Checkboxes agrupados por data-required-group
        const requiredGroups = {};
        const inputs = section.querySelectorAll('input, textarea, select');
        inputs.forEach(input => {
          const name = input.name || input.id;
          if(!name) return;
          const errorEl = section.querySelector(`.error[data-for="${name}"]`);

          // Campos de texto/number/email/tel/select com required
          if((input.tagName === 'INPUT' || input.tagName === 'TEXTAREA' || input.tagName === 'SELECT') && input.type !== 'radio' && input.type !== 'checkbox'){
            if(input.hasAttribute('required') && !input.value.trim()){
              if(errorEl) errorEl.textContent = 'Campo obrigat√≥rio';
              valid = false;
            }
            // Valida√ß√£o espec√≠fica para telefone
            if(input.type === 'tel' && input.value.trim()){
              const digits = input.value.replace(/\D+/g,'');
              if(digits.length < 10 || digits.length > 11){
                if(errorEl) errorEl.textContent = 'Telefone deve ter 10 ou 11 d√≠gitos';
                valid = false;
              } else if(digits.length === 11 && digits[2] !== '9'){
                if(errorEl) errorEl.textContent = 'Celular deve come√ßar com 9 ap√≥s o DDD';
                valid = false;
              }
            }
            // Valida√ß√£o de nome completo (pelo menos duas palavras)
            if((input.name === 'nome' || input.id === 'nome') && input.value.trim()){
              const words = input.value.trim().split(/\s+/).filter(w => w.length > 0);
              if(words.length < 2){
                if(errorEl) errorEl.textContent = 'Por favor, coloque seu nome completo';
                valid = false;
              }
            }
          }

          // Radios: validar apenas uma vez por grupo (name)
          if(input.type === 'radio'){
            if(!radiosChecked.has(name)){
              radiosChecked.add(name);
              const group = section.querySelectorAll(`input[type=radio][name="${name}"]`);
              const oneChecked = Array.from(group).some(r=> r.checked);
              if(!oneChecked){
                if(errorEl) errorEl.textContent = 'Selecione uma op√ß√£o';
                valid = false;
              }
            }
          }

          // Checkboxes pertencentes a um grupo obrigat√≥rio
          if(input.type === 'checkbox' && input.dataset.requiredGroup){
            const g = input.dataset.requiredGroup;
            if(!requiredGroups[g]) requiredGroups[g] = [];
            requiredGroups[g].push(input);
          }
        });

        // Validar grupos de checkbox marcados como obrigat√≥rios (pelo menos 1)
        Object.entries(requiredGroups).forEach(([group, list])=>{
          const any = list.some(cb => cb.checked);
            if(!any){
              // Usa data-for com o mesmo nome do primeiro checkbox (name comum)
              const name = list[0].name || list[0].id;
              const errorEl = section.querySelector(`.error[data-for="${name}"]`) || section.querySelector(`.error[data-for="${group}"]`);
              if(errorEl) errorEl.textContent = 'Marque ao menos uma op√ß√£o';
              valid = false;
            }
        });

        // Valida√ß√£o de campos complementares "Outros"
        section.querySelectorAll('input[type="checkbox"][data-other-input]').forEach(cb=>{
          const target = document.getElementById(cb.dataset.otherInput);
          if(cb.checked && target && !target.value.trim()){
            const name = cb.name || cb.id;
            const errorEl = section.querySelector(`.error[data-for="${name}"]`);
            if(errorEl) errorEl.textContent = 'Descreva a op√ß√£o "Outros"';
            valid = false;
          }
        });
        section.querySelectorAll('input[type="radio"][data-other-input]').forEach(rb=>{
          const target = document.getElementById(rb.dataset.otherInput);
          if(rb.checked && target && !target.value.trim()){
            const name = rb.name || rb.id;
            const errorEl = section.querySelector(`.error[data-for="${name}"]`);
            if(errorEl) errorEl.textContent = 'Preencha o campo "Outro"';
            valid = false;
          }
        });
        return valid;
      }

      function collectStepData(){
        const section = steps[current];
        const inputs = section.querySelectorAll('input, textarea, select');
        const stepData = {};
        const checkboxGroups = {};
        inputs.forEach(el => {
          const key = el.name || el.id;
          if(!key) return;
          if(el.type === 'radio'){
            if(el.checked) stepData[key] = el.value;
          } else if(el.type === 'checkbox'){
            if(!checkboxGroups[key]) checkboxGroups[key] = [];
            if(el.checked) checkboxGroups[key].push(el.value || true);
          } else {
            if(el.value === ''){
              if(NULLIFY_ON_EMPTY) stepData[key] = null; // s√≥ limpa se flag ativa
            } else {
              stepData[key] = el.value;
            }
          }
        });
        Object.entries(checkboxGroups).forEach(([k,v])=>{ stepData[k] = v; });
        // Mescla (limpeza com null tamb√©m sobrescreve)
        Object.entries(stepData).forEach(([k,v])=>{ allData[k] = v; });
        // Salva progresso em sessionStorage
        try{
          sessionStorage.setItem('up:formData', JSON.stringify(allData));
        }catch{
          console.warn('Erro ao salvar progresso');
        }
        // Normaliza payload completo
        const payload = {};
        allData.data_treinamento = TRAINING_CONFIG.startISO;
        EXPECTED_FIELDS.forEach(f=>{
          if(ARRAY_FIELDS.has(f)){
            const val = allData[f];
            payload[f] = Array.isArray(val) ? val : (val == null ? [] : [val]);
          } else {
            payload[f] = (f in allData) ? allData[f] : null;
          }
        });
        // Metadados / tracking
        payload._step = current + 1;
        payload.clientId = clientId;
        payload.timestamp = new Date().toISOString();
        payload.data_preenchimento = new Date().toLocaleString('pt-BR', {
          timeZone: 'America/Sao_Paulo',
          day: '2-digit',
          month: '2-digit', 
          year: 'numeric',
          hour: '2-digit',
          minute: '2-digit',
          second: '2-digit'
        });
        payload.page = location.href;
        payload.data_treinamento = TRAINING_CONFIG.startISO;
        Object.entries(utmData).forEach(([k,v])=>{ payload[k]=v; });
        if(!payload.traffic_source){
          const sourceFallback = allData.como_conheceu || utmData.utm_source || utmData.utm_medium;
          payload.traffic_source = sourceFallback || 'direct';
        }
        return payload;
      }

      function setStatus(msg, type='info'){
        const colors = { info:'#8aa0ff', ok:'#74e39d', err:'#ff6b6b' };
        sendStatus.style.color = colors[type] || colors.info;
        sendStatus.textContent = msg || '';
      }
      function enterSuccessState({ skipStatus=false } = {}){
        if(formCard) formCard.classList.add('form-completed');
        if(formTitleEl) formTitleEl.textContent = 'Cadastro confirmado';
        const dotsWrapper = document.getElementById('progressDots');
        if(dotsWrapper){
          dotsWrapper.hidden = true;
          dotsWrapper.setAttribute('aria-hidden','true');
        }
        if(progressTextEl) progressTextEl.hidden = true;
        if(form){
          form.hidden = true;
          form.setAttribute('aria-hidden','true');
          form.querySelectorAll('input, textarea, select, button').forEach(el => { el.disabled = true; });
        }
        if(successBlock){
          successBlock.hidden = false;
          const focusable = successBlock.querySelector('button, a');
          if(focusable) focusable.focus();
        }
        if(!skipStatus) setStatus('Cadastro enviado com sucesso! üéâ', 'ok');
      }

      if(successResetBtn){
        successResetBtn.addEventListener('click', ()=>{
          try{
            sessionStorage.removeItem('up:formCompleted');
            sessionStorage.removeItem('up:formData');
          }catch{}
          location.reload();
        });
      }

      async function sendFinalSubmission(data){
        try{
          const endpoint = getEndpoint();
          if(!endpoint || endpoint.startsWith('PASTE_')){
            console.warn('Defina o endpoint da API em API_ENDPOINT ou via ?endpoint=');
            setStatus('Endpoint de inscri√ß√£o n√£o configurado', 'err');
            return false;
          }
          setStatus('Enviando sua inscri√ß√£o...', 'info');
          const res = await fetch(endpoint, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
          });
          if(!res.ok){
            const txt = await res.text().catch(()=>res.statusText);
            console.warn('Resposta n√£o OK do endpoint', res.status, txt);
            setStatus('Falha ('+res.status+') ao enviar sua inscri√ß√£o', 'err');
            return false;
          }
          setStatus('Inscri√ß√£o enviada com sucesso!', 'ok');
          return true;
        }catch(err){
          console.warn('Falha ao enviar inscri√ß√£o:', err);
          setStatus('Erro ao enviar sua inscri√ß√£o', 'err');
          return false;
        }
      }

      // Navega√ß√£o Pr√≥ximo/Voltar
      form.addEventListener('click', (e)=>{
        const nextBtn = e.target.closest('[data-next]');
        const backBtn = e.target.closest('[data-back]');
        if(nextBtn){
          if(!validateCurrent()) { setStatus('Preencha os campos obrigat√≥rios', 'err'); return; }
          const payload = collectStepData();
          setStatus('');
          if(current === 0){
            const phone = payload.telefone || allData.telefone || '';
            if(isPhoneAlreadyRegistered(phone)){
              setStatus('Este n√∫mero j√° possui inscri√ß√£o ativa.', 'err');
              showPhoneDuplicateModal();
              return;
            }
          }
          showStep(current + 1);
        }
        if(backBtn){
          collectStepData();
          setStatus('');
          showStep(current - 1);
        }
      });

      // Prevenir Enter de submeter o formul√°rio, exceto na √∫ltima etapa
      form.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' && e.target.type !== 'submit'){
          e.preventDefault();
          // Se n√£o estiver na √∫ltima etapa, simula clique no bot√£o PR√ìXIMO
          if(current < steps.length - 1){
            if(!validateCurrent()) { setStatus('Preencha os campos obrigat√≥rios', 'err'); return; }
            const payload = collectStepData();
            setStatus('');
            if(current === 0){
              const phone = payload.telefone || allData.telefone || '';
              if(isPhoneAlreadyRegistered(phone)){
                setStatus('Este n√∫mero j√° possui inscri√ß√£o ativa.', 'err');
                showPhoneDuplicateModal();
                return;
              }
            }
            showStep(current + 1);
          } else {
            // Se estiver na √∫ltima etapa, submete o formul√°rio
            form.requestSubmit();
          }
        }
      });

      // Envio final (poderia tamb√©m disparar uma √∫ltima captura)
      form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        if(isSubmitting){
          setStatus('Estamos finalizando seu envio...', 'info');
          return;
        }
        isSubmitting = true;
        let keepLocked = false;
        setSubmitButtonDisabled(true);
        try{
          if(!validateCurrent()){
            setStatus('Preencha os campos obrigat√≥rios', 'err');
            return;
          }
          const payload = collectStepData();
          const phone = payload.telefone || allData.telefone || '';
          if(isPhoneAlreadyRegistered(phone)){
            setStatus('Este n√∫mero j√° possui inscri√ß√£o ativa.', 'err');
            showPhoneDuplicateModal();
            return;
          }
          payload._final = true;
          const ok = await sendFinalSubmission(payload);
          if(!ok){
            setStatus('N√£o foi poss√≠vel confirmar o envio. Tente novamente.', 'err');
            return;
          }
          keepLocked = true;
          addRegisteredPhone(phone);

          // Limpar progresso e clientId do sessionStorage ap√≥s envio bem-sucedido
          try{
            sessionStorage.removeItem('up:formData');
            sessionStorage.removeItem('up:clientId');
            sessionStorage.setItem('up:formCompleted','true');
          }catch{
            console.warn('Erro ao limpar sessionStorage');
          }

          enterSuccessState();

          // Mostrar modal final de prepara√ß√£o em vez de recarregar direto
          showFinalModal();
        } finally {
          if(!keepLocked){
            setSubmitButtonDisabled(false);
            isSubmitting = false;
          }
        }
      });

      // (CTA removido conforme solicita√ß√£o)

      // Inicializa
  initOtherToggles();
      showStep(0);
      updateScarcityProgress();
      setInterval(updateScarcityProgress, 15 * 60 * 1000);
      // Restaura campos salvos ao carregar
      (function restoreFields(){
        steps.forEach((section, idx)=>{
          const inputs = section.querySelectorAll('input, textarea, select');
          inputs.forEach(el=>{
            const key = el.name || el.id;
            if(!key || !(key in allData)) return;
            const val = allData[key];
            if(el.type === 'radio'){
              if(el.value === val) el.checked = true;
            } else if(el.type === 'checkbox'){
              if(Array.isArray(val) && val.includes(el.value)) el.checked = true;
            } else {
              if(val != null) el.value = val;
            }
          });
        });
      })();
      function showPhoneDuplicateModal(){
        if(document.getElementById('duplicateOverlay')) return;
        const ov = document.createElement('div');
        ov.className = 'final-overlay';
        ov.id = 'duplicateOverlay';
        ov.innerHTML = `
          <div class="final-modal" role="dialog" aria-modal="true" aria-labelledby="duplicateTitle">
            <h2 id="duplicateTitle">N√∫mero j√° inscrito</h2>
            <p style="margin:10px 0 18px;font-size:.9rem;color:#c0dee1;line-height:1.55;">Este telefone j√° est√° cadastrado para esta live. Se precisar de ajuda, fale com nossa equipe pelo WhatsApp.</p>
            <div style="display:flex;flex-direction:column;gap:12px;">
              <button type="button" class="btn btn-primary" id="dupWhats" style="justify-content:center;">Chamar suporte no WhatsApp</button>
              <button type="button" class="btn btn-sec" id="dupClose" style="justify-content:center;">Fechar</button>
            </div>
          </div>`;
        document.body.appendChild(ov);
        const whatsappUrl = 'https://wa.me/5513997832766?text=Ol√°! Estou com d√∫vidas sobre minha inscri√ß√£o no Encontro UP.';
        const close = ()=>{
          ov.classList.add('hide');
          setTimeout(()=>{ if(ov.parentNode) ov.remove(); }, 250);
        };
        ov.addEventListener('click', e=>{ if(e.target === ov) close(); });
        ov.querySelector('#dupClose').addEventListener('click', close);
        ov.querySelector('#dupWhats').addEventListener('click', ()=>{
          window.open(whatsappUrl, '_blank','noopener');
          close();
        });
      }
      try{
        if(sessionStorage.getItem('up:formCompleted') === 'true'){
          enterSuccessState({ skipStatus:true });
          setStatus('Voc√™ j√° concluiu seu cadastro. ‚úÖ', 'ok');
        }
      }catch{}


      function showFinalModal(){
        if(document.getElementById('finalOverlay')) return;
        const ov = document.createElement('div');
        ov.className = 'final-overlay';
        ov.id = 'finalOverlay';
        ov.innerHTML = `
          <div class="final-modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <h2 id="modalTitle">Primeira fase da inscri√ß√£o finalizada</h2>
            <p style="margin:6px 0 18px;font-size:.85rem;color:#c0dee1;line-height:1.55;">Sua inscri√ß√£o foi registrada. Para garantir a vaga no encontro de <strong style="color:#ffffff;">${TRAINING_CONFIG.dateDisplay} ‚Ä¢ ${TRAINING_CONFIG.timeRange}</strong>, finalize falando com nossa representante pelo WhatsApp.</p>
            <button type="button" class="btn btn-primary" id="finalWhats" style="width:100%;justify-content:center;">Falar com a representante</button>
            <p style="margin:18px 0 0;font-size:.75rem;color:#8fb8bc;line-height:1.5;">Ao clicar no bot√£o, uma nova aba ser√° aberta com a mensagem pronta. Envie para confirmar sua participa√ß√£o.</p>
          </div>`;
        document.body.appendChild(ov);
        const whatsappUrl = 'https://wa.me/5513997832766?text=Ol√°! Acabei de me inscrever no Encontro UP e quero confirmar minha vaga.';
        function closeOverlay(){
          ov.classList.add('hide');
          setTimeout(()=>{ ov.remove(); location.reload(); }, 300);
        }
        ov.addEventListener('click', e=>{ if(e.target === ov) closeOverlay(); });
        const whatsBtn = ov.querySelector('#finalWhats');
        whatsBtn.addEventListener('click', ()=>{
          window.open(whatsappUrl, '_blank','noopener');
          closeOverlay();
        });
      }


      function cryptoRandomId(){
        try{
          const arr = new Uint8Array(16);
          (self.crypto || window.crypto).getRandomValues(arr);
          return Array.from(arr).map(b=>b.toString(16).padStart(2,'0')).join('');
        }catch{
          return 'id-' + Math.random().toString(36).slice(2) + Date.now().toString(36);
        }
      }

      // ================= Contagem p√≥s-formul√°rio =================
      (function initAfterCountdown(){
        const root = document.getElementById('afterCountdown');
        if(!root) return;
        const startStr = root.getAttribute('data-date') || TRAINING_CONFIG.startISO;
        const start = new Date(startStr);
        const end = TRAINING_CONFIG.endISO ? new Date(TRAINING_CONFIG.endISO) : new Date(start.getTime() + (2*60)*60*1000);
        const dEl = document.getElementById('afDays');
        const hEl = document.getElementById('afHours');
        const mEl = document.getElementById('afMinutes');
        const sEl = document.getElementById('afSeconds');
        const liveEl = document.getElementById('afLive');
        const endedEl = document.getElementById('afEnded');
        function pad(n){return String(n).padStart(2,'0');}
        function tick(){
          const now = new Date();
            if(now >= start && now <= end){
              // Durante a live (29/01 19:00 - 21:29) - esconder tudo
              liveEl.hidden = true; endedEl.hidden = true;
              return;
            }
            if(now > end){
              // Ap√≥s o fim da live
              liveEl.hidden = true; endedEl.hidden = false;
              return;
            }
          // Antes da live - mostrar "AO VIVO EM" + countdown
          liveEl.hidden = false; endedEl.hidden = true;
          const diff = start - now;
          const total = Math.max(0, Math.floor(diff/1000));
          const days = Math.floor(total / 86400);
          const hours = Math.floor((total % 86400)/3600);
          const mins = Math.floor((total % 3600)/60);
          const secs = total % 60;
          dEl.textContent = pad(days);
          hEl.textContent = pad(hours);
          mEl.textContent = pad(mins);
          sEl.textContent = pad(secs);
        }
        tick();
        setInterval(tick,1000);
      })();
      // ============================================================

    </script>

    <!-- Bot√£o flutuante WhatsApp -->
    <a href="https://wa.me/5513997832766?text=Ol√°! Tenho d√∫vidas sobre o Encontro UP de Intelig√™ncia Emocional" 
       class="whatsapp-float" 
       target="_blank" 
       rel="noopener" 
       title="Tire suas d√∫vidas no WhatsApp"
       aria-label="Contato WhatsApp para d√∫vidas">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.525 3.488"/>
      </svg>
    </a>
  </body>
</html>
